---
layout: compress
---

{% include base_path %}

<!doctype html>
<html lang="{{ site.locale | slice: 0,2 }}" class="no-js" data-theme="dark">
<head>
  {% include head.html %}
  {% include head/custom.html %}

  <style>
    html,body{margin:0;height:100%;background:transparent}
    #starfield{
      position:fixed;top:0;left:0;width:100vw;height:100vh;
      z-index:-2;pointer-events:none;
    }
    #globe-container{
      position:fixed;top:0;left:0;width:100vw;height:100vh;
      z-index:-1;pointer-events:none;overflow:hidden;
    }
    .page,.page__content,.page__footer,.masthead,.initial-content{
      background:transparent!important;
    }
    canvas{display:block}
    
    /* Minimal footer fix */
    body { min-height: 100vh; display: flex; flex-direction: column; }
    .page__footer { margin-top: auto; }
  </style>
</head>

<body>
  <canvas id="starfield"></canvas>
  <div   id="globe-container"></div>

  {% include masthead.html %}
  <div style="flex: 1;">
    {{ content }}
  </div>
  {% include footer/custom.html %}
  {% include footer.html %}
  {% include scripts.html %}

  <!-- ------------- 3‑D GLOBE ------------- -->
  <script type="module" crossorigin>
    // Minimal change: use cdnjs for better GitHub Pages compatibility
    import * as THREE from 'https://cdnjs.cloudflare.com/ajax/libs/three.js/r155/three.module.min.js';
    import { OrbitControls } from 'https://cdnjs.cloudflare.com/ajax/libs/three.js/r155/three.module.min.js';

    const container = document.getElementById('globe-container');
    const scene  = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60,1,0.1,1000);
    camera.position.z = 2.5;

    const renderer = new THREE.WebGLRenderer({alpha:true,antialias:true});
    renderer.setPixelRatio(window.devicePixelRatio);
    container.appendChild(renderer.domElement);

    function resizeGlobe(){
      const size=Math.floor(Math.min(innerWidth,innerHeight)*0.5);
      Object.assign(container.style,{
        width:size+'px',height:size+'px',
        left:(innerWidth-size)/2+'px',
        top :(innerHeight-size)/2+'px'
      });
      renderer.setSize(size,size);
      camera.aspect=1; camera.updateProjectionMatrix();
    }
    resizeGlobe(); addEventListener('resize',resizeGlobe);

    const IMG='https://cdn.jsdelivr.net/npm/globe.gl@2.36.3/example/img/';
    const loader=new THREE.TextureLoader();

    const earth=new THREE.Mesh(
      new THREE.SphereGeometry(1,256,256),
      new THREE.MeshPhongMaterial({
        map      :loader.load(IMG+'earth-blue-marble.jpg'),
        bumpMap  :loader.load(IMG+'earth-topology.png'),
        bumpScale:0.02,
        specular :0x333333,
        shininess:5
      })
    );
    scene.add(earth);

    const clouds=new THREE.Mesh(
      new THREE.SphereGeometry(1.005,256,256),
      new THREE.MeshPhongMaterial({
        map        :loader.load(IMG+'earth-clouds.png'),
        transparent:true,opacity:0.9
      })
    );
    scene.add(clouds);

    scene.add(new THREE.AmbientLight(0x888888,0.6));
    const sun=new THREE.DirectionalLight(0xffffff,0.8);
    sun.position.set(5,3,5); scene.add(sun);

    const controls=new OrbitControls(camera,renderer.domElement);
    controls.autoRotate=true; controls.autoRotateSpeed=0.5;
    controls.enableZoom=false; controls.enablePan=false;

    (function animate(){
      requestAnimationFrame(animate);
      controls.update();
      renderer.render(scene,camera);
    })();
  </script>

  <!-- ------------- SHOOTING‑STARS 2‑D ------------- -->
  <script>
    const c=document.getElementById('starfield'),ctx=c.getContext('2d');
    let w,h; const resize=()=>{w=c.width=innerWidth;h=c.height=innerHeight};
    resize();addEventListener('resize',resize);

    const stars=[...Array(350)].map(()=>({
      x:Math.random()*w,y:Math.random()*h,r:Math.random()*1.2+0.2,a:Math.random()*0.5+0.5
    }));
    const mets=[];setInterval(()=>mets.push({x:-50,y:Math.random()*h*0.6,vx:4+Math.random()*3,vy:2+Math.random()*1.5,l:0}),2e3);

    !(function draw(){
      ctx.fillStyle='#000';ctx.fillRect(0,0,w,h);
      ctx.fillStyle='#fff';stars.forEach(s=>{ctx.globalAlpha=s.a;ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,6.28);ctx.fill()});
      ctx.globalAlpha=1;
      for(let i=mets.length;i--;) {
        const m=mets[i];m.x+=m.vx;m.y+=m.vy;m.l++;
        ctx.strokeStyle=`rgba(255,255,255,${1-m.l/60})`;ctx.lineWidth=2;
        ctx.beginPath();ctx.moveTo(m.x,m.y);ctx.lineTo(m.x-10,m.y-5);ctx.stroke();
        if(m.x>w+50||m.y>h+50||m.l>60) mets.splice(i,1);
      }
      requestAnimationFrame(draw);
    })();
  </script>
</body>
</html>